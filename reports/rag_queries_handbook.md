RAG 可接手的查询类型（操作手册）

说明：以下查询类型由 RAG（检索增强生成）优先处理。系统默认中文输出，只有在你特别指示使用其他语言时才会变更。

1) 事实回溯 / 历史记录
- 示例："上周我跟你讨论过 X 的结论？"、"谁在 2026-02-07 会议负责联系供应商？"
- 触发：包含时间、事件、主题关键词或要求引用来源。
- 处理：优先检索 chat_summaries → 回退 chat_turns；若含决定/todo，晋升为长期记忆条目。

2) 偏好与配置项查询
- 示例："默认报告用哪种语言？"
- 触发：包含“偏好/默认/首选”等关键词。
- 处理：返回 MEMORY.md 中偏好；可按需写入新偏好（需用户确认）。

3) 决策与待办（Todos）查询
- 示例："上次决定谁负责合同？还有哪些未完成的 todo？"
- 触发：包含“决定/todo/待办/deadline”。
- 处理：抽取并列出 todos 与负责人；写入 chat_summaries 并标注状态（需人工确认重要变更）。

4) 文档与资料检索
- 示例："把关于 X 的技术要求文档列出来并摘要。"
- 触发：指定资料库路径或关键词（library/ reports/）。
- 处理：返回摘要 + 来源路径；高价值摘录可晋升到长期记忆。

5) 项目状态与里程碑查询
- 示例："VN 项目当前进度和风险？"
- 触发：包含项目名、里程碑或周报关键词。
- 处理：汇总最近 summaries 与相关 turns，输出状态与风险。

6) 引用与证据类查询
- 示例："上次给我的数据来源是什么？把原始来源列出来。"
- 触发：需要来源或证据时。
- 处理：返回可核验来源与引用片段。

7) SOP / 运维手册查询
- 示例："重启 Gateway 的步骤"、"遇到 429 的应对流程是什么？"
- 触发：运维/流程相关关键词。
- 处理：优先返回运维文档或 MEMORY.md 中 SOP 节点。

不由 RAG 自动决定的场景（需人工）
- 涉及法律/财务承诺、密钥/权限变更、或大规模破坏性删除（必须人工审批）。

审计与写入规则
- 当 RAG 判定结果为高价值（含决定/todo/偏好），会建议晋升为长期记忆并生成草稿写入提案；仅在你确认后才写入 MEMORY.md 或 chat_summaries。
- 所有自动写入/删除操作都会记录到 /Users/apple/clawd/reports，并保留备份以便回滚。

触发建议
- 可用前缀触发：在查询中加入“RAG:” 或 “检索:” 前缀，系统优先走 RAG 路径。


文件位置：/Users/apple/clawd/reports/rag_queries_handbook.md
